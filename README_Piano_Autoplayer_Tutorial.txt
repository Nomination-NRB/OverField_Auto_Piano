Windows 钢琴自动演奏 - 乐谱编写教程 (LRC 风格 .lrcp)

一、键位与音符标记
- 低音：L1-L7  -> 键 a s d f g h j
- 中音：M1-M7  -> 键 q w e r t y u
- 高音：H1-H7  -> 键 1 2 3 4 5 6 7
- 和弦：C Dm Em F G Am G7 -> 键 z x c v b n m

二、行格式（类似 LRC）
1. 短音 / 点按：
[mm:ss.xxx] TOKEN1 TOKEN2 ...
   单时间戳表示所有列出的 token 立即按下并立即释放（tap）。
2. 延长音（保持按键）：
[mm:ss.xxx][mm:ss.xxx] TOKEN1 TOKEN2 ...
   第一时间戳 = 按下时刻；第二时间戳 = 释放时刻。适用于需要持续的音/和弦。
3. 仍可写多个独立时间戳：
[00:02.000][00:03.000] C   # 两次短音 C（因第二时间不大于第一时间或需要多次触发时）

- 时间戳 [分:秒.毫秒]，毫秒可省略；
- TOKEN 必须是：
    - L1-L7（低音）/ M1-M7（中音）/ H1-H7（高音）
    - 或和弦名：C/Dm/Em/F/G/Am/G7

示例：
[00:01.200] M1 M3              # 在 1.200s 同时点按 M1 与 M3
[00:02.000][00:02.600] M5       # M5 从 2.000s 按下保持到 2.600s
[00:03.000][00:04.200] M3 C     # M3 与和弦 C 同时按下，4.200s 释放
[00:05.000][00:06.000] M1 M5 M3 # 三音延长和弦
[00:07.000][00:08.000] C        # 和弦 C 延长

三、节奏与速度
- 乐谱时间是“真实秒”，整体加速/减速使用程序中的“速度比例”而非修改每个时间戳。
  例如原速 1.0；2.0 表示加倍速度（事件时间轴等比例压缩）。

四、常见写法
1) 单旋律短音（旧写法仍兼容）：
   [00:00.000] M1
   [00:00.600] M1
   [00:01.200] M5
2) 延长音：
   [00:02.400][00:03.000] M6
3) 加入和弦：
   [00:03.600][00:04.200] M5 C
4) 多音同时保持：
   [00:05.000][00:06.200] M3 M5 M1

五、对齐与延迟
- 若游戏有输入延迟，可在程序里设置“全局延迟（毫秒）”。
- 演奏前有“起始倒计时”，便于切回游戏聚焦窗口。

六、文件扩展名
- 建议使用 .lrcp（LRC for Piano），普通 .txt 也可。编码使用 UTF-8。

七、示例：一闪一闪亮晶晶（节选，加入延长示例）
[00:00.000][00:00.600] M1 C
[00:00.600] M1
[00:01.199] M5
[00:01.799] M5
[00:02.399][00:03.000] M6      # M6 保持 0.601s
[00:03.600] M5
...

提示：若需要连续相同短音，用多个单时间戳行或两个相等时间戳写法，不要写为延长音。

祝你弹琴愉快！
